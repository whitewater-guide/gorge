builds:
  - main: ./cli/main.go
    binary: gorge-server
    goos:
      - linux
    goarch:
      - amd64
      # - arm64
    ldflags:
      - -s -w -X github.com/{{ .Env.REPO_NAME }}/version.Version={{ .Version }}
    tags:
      - sqlite_omit_load_extension
      - netgo

dockers:
  - id: amd64
    goos: linux
    goarch: amd64
    extra_files:
      - timezone.data
    image_templates:
      - "ghcr.io/{{ .Env.REPO_NAME }}:latest"
      - "ghcr.io/{{ .Env.REPO_NAME }}:{{ .Version }}"
  # - id: arm64
  #   goos: linux
  #   goarch: arm64
  #   extra_files:
  #     - timezone.data
  #   image_templates:
  #     - "ghcr.io/{{ .Env.REPO_NAME }}:latest"
  #     - "ghcr.io/{{ .Env.REPO_NAME }}:{{ .Version }}"
